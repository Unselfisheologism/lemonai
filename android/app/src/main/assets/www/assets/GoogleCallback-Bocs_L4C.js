import{p as m,u as _,r as i,s as g,L as f,o as w,f as l,g as v,d as u,l as y,e as n,v as S,S as k,x,w as C,y as b,h as p,j as L,t as P}from"./index-DfAoYx5F.js";import{s as T}from"./auth-xyVyMPn2.js";import"./http-gFURT5VZ.js";import"./user-BYcZl5Be.js";const U={class:"callback-container"},V={class:"animation-wrapper"},B={key:0,class:"loading-text"},G={__name:"GoogleCallback",setup(N){const{t:r}=_(),d=v(),a=i(0),c=i(!1),h=g(f,{style:{fontSize:"48px",color:"#4f46e5"},spin:!0});return w(async()=>{setTimeout(()=>c.value=!0,300);const t=()=>{a.value<80&&(a.value+=10,setTimeout(t,300))};t();let e;if(window.location.search)e=new URLSearchParams(window.location.search);else{const s=window.location.hash.split("?")[1];e=new URLSearchParams(s)}if(console.log("urlParams:",e.has("code")),e.has("code"))try{const s="http://localhost:5005/api/users/auth/google";console.log("redirectUri",s),await T.googleAuth(e.get("code"),s),a.value=100,l.success(r("auth.loginSuccessful")),setTimeout(()=>d.push({name:"lemon"}),500)}catch(o){l.error(r("auth.loginFailed")+": "+o.message)}}),(t,e)=>{const o=k,s=x;return p(),u("div",U,[y("div",V,[n(o,{size:"large",indicator:S(h),class:"spin-animation"},null,8,["indicator"]),n(s,{percent:a.value,"show-info":!1,"stroke-color":"#4f46e5",class:"progress-bar"},null,8,["percent"])]),n(b,{name:"fade"},{default:C(()=>[c.value?(p(),u("p",B,P(t.$t("Verifying Google Login...")),1)):L("",!0)]),_:1})])}}},q=m(G,[["__scopeId","data-v-51fcb426"]]);export{q as default};
